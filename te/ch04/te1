<?php 
/*----------------------------------------------------------------------------
* Nom du programme: city
*
* Auteur : Sonia Robert-Nicoud
* Date: 13.03.2015
* Description: test où nous devons afficher notre table City.
*
*-----------------------------------------------------------------------------
*/
?>
<?php
define("DB_SERVER", 'localhost');
define("DB_USER", 'cpnv');
define("DB_PASSWORD", 'cpnv1234');
define("DB_NAME", 'world');
?>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Test</title>
</head>
<body>
<?php
//se connecter à la base de donnée et regarder qu'il n'y ait pas de problèmes pour s'y connecter.
$dbh = new mysqli(DB_SERVER, DB_USER, DB_PWD, DB_NAME);
if ($dbh->connect_errno) {
die("Problèmes de connexion ({$dbh->connect_errno}) " .
$dbh->connect_error);
}
$dbh->close();

$sql = "SELECT ID, Name, CountryCode, District FROM City WHERE CountryCode = 'CHE'
ORDER BY Name";
//petite phrase avant le tableau pour dire le nombres de villes qu'il y a.
if ($result = $dbh->query($sql)) {
$nbr = $result->num_rows;
echo "Nous retrouvons" . $nbr . "ville(s) en Suisse";
$result->close();
}
//Création de la table.
?>
<table>
<tr>
<td>ID</td>
<td>Name</td>
<td>CountryCode</td>
<td>District</td>
<td>Population from City</td>
<td>edit.php</td>
</tr>
</table>
<?php
while($donnees = mysql_fetch_array($result))
{
//Affichage de la table
?>
<tr>
<td><?php echo $donnees['ID'];?></td>
<td><?php echo $donnees['Name'];?></td>
<td><?php echo $donnees['CountryCode'];?></td>
<td><?php echo $donnees['District'];?></td>
<td><?php echo $donnees['Population from City'];?></td>
<td><?php echo $donnees['edit.php'];?></td>
</tr>

<input type="submit" value="Enregistrer"></submit>
<tr>
<input type="submit" value="Annuler"></submit>

</body>
</html>
